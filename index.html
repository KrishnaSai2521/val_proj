<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Proposal</title>

<style>
  html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    background-color: #d6336c; 
  }

  body {
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Comic Sans MS', cursive;
    overflow: hidden;
    position: relative;
    background: linear-gradient(135deg, #d6336c 0%, #ff6b95 100%);
  }

  body::before {
    content: "";
    position: absolute;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent 70%);
    filter: blur(80px);
    animation: blob 15s infinite alternate ease-in-out;
    z-index: 0;
  }

  @keyframes blob {
    from { transform: translate(-100px, -100px); }
    to { transform: translate(200px, 200px); }
  }

  .container {
    width: 100vw;
    height: 100vh;
    text-align: center;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: opacity 1s ease-in-out;
  }

  h1 {
    font-size: 2.5rem;
    color: white;
    margin-bottom: 20px;
    text-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }

  .proposal-img {
    width: 300px;
    max-width: 80%;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.3);
    margin-bottom: 25px;
    border: 5px solid rgba(255, 255, 255, 0.3);
  }

  button {
    padding: 15px 35px;
    font-size: 18px;
    border-radius: 50px;
    cursor: pointer;
    margin: 10px;
    font-weight: bold;
    border: none;
    transition: 0.3s;
  }

  #yes { background: white; color: #d6336c; animation: pulse 2s infinite; }
  #no { background: rgba(255, 255, 255, 0.2); color: white; backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.4); }

  @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

  #heart-to-hold {
    font-size: 100px;
    cursor: pointer;
    user-select: none;
    display: inline-block;
    animation: heartbeat 1.5s infinite;
    transition: transform 0.1s;
  }

  @keyframes heartbeat { 0% { transform: scale(1); } 15% { transform: scale(1.2); } 30% { transform: scale(1); } }

  .heart-particle {
    position: absolute;
    bottom: -20px;
    animation: floatUp linear infinite;
    z-index: 1;
    pointer-events: none;
  }

  @keyframes floatUp {
    from { transform: translateY(0) rotate(0deg); opacity: 1; }
    to { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
  }
</style>
</head>
<body>

<div class="container" id="main-content">
  <img src="intro.png" alt="Proposal" class="proposal-img" />
  <h1>Chinnu, will you marry me? üíç</h1>
  <div id="btn-wrapper">
    <button id="yes">Yes üíñ</button>
    <button id="no">No üíî</button>
  </div>
</div>

<script>
  const mainContent = document.getElementById("main-content");

  // No Button Runner Logic
  const setupNoButton = () => {
    const noBtn = document.getElementById("no");
    if(!noBtn) return;
    noBtn.addEventListener("mouseenter", () => {
      const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
      const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);
      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
    });
  };
  setupNoButton();

  // STAGE 2: YES CLICKED -> SHOW HOLD PROMPT
  document.getElementById("yes").onclick = () => {
    mainContent.style.opacity = 0;
    setTimeout(() => {
      mainContent.innerHTML = `
        <h1 style="margin-bottom: 50px;">Hold my heart... ‚ù§Ô∏è</h1>
        <div id="heart-to-hold">‚ù§Ô∏è</div>
        <p style="color:white; margin-top:20px; font-style:italic; opacity:0.8;">Keep holding until it bursts!</p>
      `;
      mainContent.style.opacity = 1;
      setupHoldLogic();
    }, 500);
  };

  // STAGE 3: HOLD LOGIC
  function setupHoldLogic() {
    const heart = document.getElementById("heart-to-hold");
    let holdTimer;
    let scale = 1;

    const startHold = () => {
      holdTimer = setInterval(() => {
        scale += 0.05;
        heart.style.transform = `scale(${scale})`;
        heart.style.filter = `drop-shadow(0 0 ${scale * 10}px white)`;
        if (scale > 3.5) {
          clearInterval(holdTimer);
          showStoryStage();
        }
      }, 50);
    };

    const endHold = () => {
      clearInterval(holdTimer);
      if (scale < 3.5) {
        scale = 1;
        heart.style.transform = "scale(1)";
        heart.style.filter = "none";
      }
    };

    heart.addEventListener("mousedown", startHold);
    heart.addEventListener("touchstart", startHold);
    window.addEventListener("mouseup", endHold);
    window.addEventListener("touchend", endHold);
  }

  // STAGE 4: STORY LINES
  function showStoryStage() {
    mainContent.style.opacity = 0;
    setTimeout(() => {
      mainContent.innerHTML = `
        <img src="img11.png" alt="Our Forever" class="proposal-img" style="width:320px;" />
        <div id="story" style="font-size:2rem; color:white; font-weight:bold; height:100px; text-shadow: 2px 2px 8px rgba(0,0,0,0.3); transition: opacity 0.5s;"></div>
      `;
      mainContent.style.opacity = 1;

      const lines = [
        "You said yes‚Ä¶ üíï",
        "I‚Äôve dreamed of this moment üíì",
        "You are my forever ü•π",
        "Life with you is all I want üå∏",
        "Together, we‚Äôll build our story üíñ",
        "Chinnu, thank you for saying yes üíç"
      ];

      let i = 0;
      const storyDiv = document.getElementById("story");
      const interval = setInterval(() => {
        storyDiv.style.opacity = 0;
        setTimeout(() => {
          storyDiv.innerHTML = lines[i];
          storyDiv.style.opacity = 1;
          i++;
          if (i === lines.length) {
            clearInterval(interval);
            setTimeout(showFinalImage, 3000); // Wait 3s after last line to show final image
          }
        }, 500);
      }, 3000);

      setInterval(createHeart, 300);
    }, 500);
  }

  // STAGE 5: FINAL IMAGE
  function showFinalImage() {
    mainContent.style.opacity = 0;
    setTimeout(() => {
      mainContent.innerHTML = `
        <img src="final.png" alt="Forever" class="proposal-img" style="width:350px; border: 8px solid white;" />
        <h1 style="font-size: 3rem; margin-top: 20px;">Forever & Always ‚ù§Ô∏è</h1>
      `;
      mainContent.style.opacity = 1;
    }, 1000);
  }

  function createHeart() {
    const h = document.createElement("div");
    h.className = "heart-particle";
    h.innerHTML = "üíó";
    h.style.left = Math.random() * 100 + "vw";
    h.style.fontSize = Math.random() * 20 + 15 + "px";
    h.style.animationDuration = Math.random() * 2 + 3 + "s";
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 5000);
  }
</script>

</body>
</html>
